<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. Exportd &#8212; DATAGERRY undefined documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=6b9c481c" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=6ffac522"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="icon" href="../_static/datagerry_favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. DocAPI" href="docapi.html" />
    <link rel="prev" title="3. Advanced Concepts" href="advanced-concepts.html" />
     
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>


  </head><body>
    <div id="document">
            <div id="sidebar">
                <div class="sidebar-header">
    <a href="../index.html"><img src="../_static/img/datagerry_logo.svg"
                                            class="d-inline-block align-top"/></a>
</div>


    <div id="navigation" role="navigation">
        
            
            
                <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/welcome.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/cloud_vs_on_premise.html">Cloud vs On Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/dg_installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/updates.html">Updating DataGerry</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Admin Manual</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Admin Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html">1. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="framework.html">2. Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced-concepts.html">3. Advanced Concepts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4. Exportd</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#concept">4.1. Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">4.2. Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#externalsystems">4.3. ExternalSystems</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="docapi.html">5. DocAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-management.html">6. UserModel Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html">7. Authentication</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dev Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Development Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/rest/index.html">REST</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">License</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/license.html">License</a></li>
</ul>

            
        
        <p class="caption">Search</p>
        <form action="../search.html" method="get">
            <div class="form-group">
                <input type="search" name="q" class="form-control" placeholder="Search"/>
            </div>
            <input type="hidden" name="check_keywords" value="yes"/>
            <input type="hidden" name="area" value="default"/>
        </form>
    </div>

            </div>
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div id="content" role="main">
                        
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="../index.html">Docs</a></li>
            
                <li class="breadcrumb-item"><a href="index.html">Admin Manual</a></li>
            
            <li class="breadcrumb-item active"><span class="section-number">4. </span>Exportd</li>
            <div class="ml-auto">
                
    <a href="advanced-concepts.html" title="Previous Chapter: 3. Advanced Concepts">
        <span>&laquo; 3. Advanced Concepts</span>
    </a> |
    <a href="docapi.html" title="Next Chapter: 5. DocAPI">
        <span>5. DocAPI &raquo;</span>
    </a>
            </div>
        </ol>
    </nav>


                        
  <section id="exportd">
<h1><span class="section-number">4. </span>Exportd<a class="headerlink" href="#exportd" title="Link to this heading">¶</a></h1>
<section id="concept">
<h2><span class="section-number">4.1. </span>Concept<a class="headerlink" href="#concept" title="Link to this heading">¶</a></h2>
<p>Exportd is an interface for exporting objects to external systems like monitoring systems, ticket systems, backup
software or any kind of other system. Exports are organized in Jobs. A Job contains the following informations:</p>
<blockquote>
<div><ul class="simple">
<li><p>Sources</p></li>
<li><p>Destinations</p></li>
<li><p>Variables</p></li>
</ul>
</div></blockquote>
<p>A source defines the objects that should be exported to the external system. Multiple sources can be configured per
Job. A source consists of multiple objects of a specific object type (e.g. router objects) that can be filtered by one or
multiple conditions (e.g. all router objects with field monitoring=true).</p>
<p>A destination is an external system, where you want to push DATAGERRY objects. One or multiple destinations can be
configured per Export Job. A destination consists of an ExternalSystem (e.g. ExternalSystemOpenNMS for an export of
objects to OpenNMS) and parameters, that depends on the ExternalSystem (e.g. resturl/restuser/restpassword for an export
to OpenNMS). DATAGERRY brings some ExternalSystems out of the box, in the near future, it will be possible to add
ExternalSystems with a plugin system.</p>
<p>Variables are a mapping of object data to data that are required for the external system. For example for an export of
objects to a DNS server (to add DNS-A records), hostname and ip are required. In variables a mapping between object
fields and the variable hostname can be configured.</p>
<p>Export Jobs can be triggered manually (by clicking on a button in the webui) or event based, if the configured sources
of a job were changed (e.g. a new object was added).</p>
<p>Export Jobs can be of type <em>Push</em> (default) or <em>Pull</em>. Push Jobs are a push to an external system, which runs in a
background process, while a <em>Pull</em> job is triggered by an external system via REST. The client directly gets the result
within that REST call.</p>
</section>
<section id="configuration">
<h2><span class="section-number">4.2. </span>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>Exportd Jobs can be configured in the WebUI under “Task Management” -&gt; “Exportd Job Settings”. Add a new Job or edit an
existing one. A wizzard will guide you through the configuration process:</p>
<section id="define-sources">
<h3><span class="section-number">4.2.1. </span>Define Sources<a class="headerlink" href="#define-sources" title="Link to this heading">¶</a></h3>
<p>One or multiple sources can be part of an Export Job. Select the Type of objects you want to export. Add one or multiple
conditions for limitating the export of objects.</p>
</section>
<section id="define-destinations">
<h3><span class="section-number">4.2.2. </span>Define Destinations<a class="headerlink" href="#define-destinations" title="Link to this heading">¶</a></h3>
<p>Add one or multiple destinations to your Export Job. A destination consists of an ExternalSystem. Choose one out of the
box on the left side and move it to the center area. Depending on the ExternalSystem class, parameters can or must be
set (e.g. the URL of an external system). All parameter wil be preset in the WebUI and you can find a small description
by moving the mouse of the info icon.</p>
</section>
<section id="define-export-variables">
<h3><span class="section-number">4.2.3. </span>Define Export Variables<a class="headerlink" href="#define-export-variables" title="Link to this heading">¶</a></h3>
<p>Depending on the ExternalSystem, Variables must be defined. For example, an export to OpenNMS requires variables like
nodelabel or ip. To find, which variables are available, click on one of the “Variable Helpers”. A Variable has a name
and a default value. You also can add other values for specific object types.</p>
<p>The value of a variable is a Jinja2 template. You can use static strings or get data from a specific object. The
following syntax is supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># access the ID of the current object</span>
<span class="p">{{</span><span class="nb">id</span><span class="p">}}</span>

<span class="c1"># access the field &quot;hostname&quot; of the current object</span>
<span class="p">{{</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;hostname&quot;</span><span class="p">]}}</span>

<span class="c1"># dereference an object reference in field &quot;location&quot; (access the field &quot;city&quot; of the referenced object)</span>
<span class="c1"># max 3 levels were dereferenced</span>
<span class="p">{{</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">][</span><span class="s2">&quot;fields&quot;</span><span class="p">][</span><span class="s2">&quot;city&quot;</span><span class="p">]}}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you access object fields, use the name of the field instead of the label.</p>
</div>
</section>
<section id="configure-scheduling">
<h3><span class="section-number">4.2.4. </span>Configure Scheduling<a class="headerlink" href="#configure-scheduling" title="Link to this heading">¶</a></h3>
<p>This step sets the settings for running exportd jobs.</p>
<table class="docutils align-left" id="id1">
<caption><span class="caption-text">Table 1: Execution settings</span><a class="headerlink" href="#id1" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Execution</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Run Exportd Job on Event</p></td>
<td><p>It is also possible to run the job event based (this must be enabled in the configuration). That means, the job is triggered, if one of the sources objects has changed or a new object was added. All objects are transmitted that correspond to the previously defined conditions</p></td>
</tr>
<tr class="row-odd"><td><p>Transfer subset</p></td>
<td><p>Transfer only the objects that have been changed. Excludes jobs that have been executed manually and jobs that are executed automatically after they have been created.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">When executing the following Exportd jobs, additional ‘event’ information is transmitted.</div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>External systems</dt><dd><ul>
<li><p>ExternalSystemDummy</p></li>
<li><p>ExternalSystemExecuteScript</p></li>
<li><p>ExternalSystemGenericRestCall</p></li>
<li><p>ExternalSystemGenericPullJson</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Events</dt><dd><ul>
<li><dl class="simple">
<dt>Run on Event</dt><dd><ul>
<li><p>insert</p></li>
<li><p>update</p></li>
<li><p>delete</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Run manual</dt><dd><ul>
<li><p>manual</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>After creating Exportd Job</dt><dd><ul>
<li><p>automatic</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="line-block">
<div class="line">If the switch ‘Run on Event’ is set, all objects are transmitted that correspond to the previously defined conditions ( hostname == ‘.*host’).</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;insert&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;variables&quot;</span><span class="p">:{</span>
<span class="w">         </span><span class="nt">&quot;hostname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;insert&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;variables&quot;</span><span class="p">:{</span>
<span class="w">         </span><span class="nt">&quot;hostname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;datagerry-host&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">If the switch ‘Transfer subset’ is set, only the changed objects are transferred. The condition ( hostname == ‘.*host’). still applies.</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;7&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;insert&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;variables&quot;</span><span class="p">:{</span>
<span class="w">         </span><span class="nt">&quot;hostname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;customer-host&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="externalsystems">
<h2><span class="section-number">4.3. </span>ExternalSystems<a class="headerlink" href="#externalsystems" title="Link to this heading">¶</a></h2>
<p>Currently the follwowing ExternalSystems are supported:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can add your own ExternalSystems with a plugin system, that will be available soon.</p>
</div>
<table class="docutils align-left" id="id2" style="width: 100%">
<caption><span class="caption-text">Table 2: Supported external systems</span><a class="headerlink" href="#id2" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>External system</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ExternalSystemAnsible</p></td>
<td><p>Provides a dynamic inventory for Ansible</p></td>
</tr>
<tr class="row-odd"><td><p>ExternalSystemCpanelDns</p></td>
<td><p>Creates DNS-A Records in cPanel</p></td>
</tr>
<tr class="row-even"><td><p>ExternalSystemCsv</p></td>
<td><p>Creates a CSV file on the filesystem</p></td>
</tr>
<tr class="row-odd"><td><p>ExternalSystemDummy</p></td>
<td><p>A dummy for testing Exportd - will only print some debug output</p></td>
</tr>
<tr class="row-even"><td><p>ExternalSystemExcuteScript</p></td>
<td><p>Executes a script on the DATAGERRY machine</p></td>
</tr>
<tr class="row-odd"><td><p>ExternalSystemGenericPullJson</p></td>
<td><p>Provides a JSON structure that can be pulled via the DATAGERRY REST API</p></td>
</tr>
<tr class="row-even"><td><p>ExternalSystemGenericRestCall</p></td>
<td><p>Sends a HTTP POST to an userdefined URL</p></td>
</tr>
<tr class="row-odd"><td><p>ExternalSystemMySQLDB</p></td>
<td><p>Syncs CMDB objects to one or multiple MySQL/MariaDB database tables</p></td>
</tr>
<tr class="row-even"><td><p>ExternalSystemOpenNMS</p></td>
<td><p>Add nodes to the monitoring system OpenNMS with the OpenNMS REST API</p></td>
</tr>
</tbody>
</table>
<section id="externalsystemansible">
<h3><span class="section-number">4.3.1. </span>ExternalSystemAnsible<a class="headerlink" href="#externalsystemansible" title="Link to this heading">¶</a></h3>
<p>This class will provide a dynamic inventory for <a class="reference external" href="https://ansible.com">Ansible</a>. and needs to be configured as Pull
Job. The exporter walks through all CMDB objects that are configured as export source and creates Ansible groups. The
output is formatted as JSON and can be pulled with the DATAGERRY REST API.</p>
<p>We provide a little wrapper script in the contrib directory, that can be directly used by Ansible with the <a class="reference external" href="https://docs.ansible.com/ansible/latest/plugins/inventory/script.html">inventory
script plugin</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash

# DATAGERRY - OpenSource Enterprise CMDB
# Copyright (C) 2025 becon GmbH
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as
# published by the Free Software Foundation, either version 3 of the
# License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program. If not, see &lt;https://www.gnu.org/licenses/&gt;.

# small helper script for ansible dynamic inventory 

# config variables
DATAGERRY_EXPORT_TASK=ansible-router
DATAGERRY_REST_URL=http://127.0.0.1:4000/rest
DATAGERRY_REST_USER=admin
DATAGERRY_REST_PASSWORD=admin

# create output
if [ &quot;$1&quot; == &quot;--list&quot; ]
then
	# execute task
	curl \
		-X GET \
		-u &quot;${DATAGERRY_REST_USER}:${DATAGERRY_REST_PASSWORD}&quot; \
		--silent \
		${DATAGERRY_REST_URL}/exportdjob/pull/${DATAGERRY_EXPORT_TASK}
else
	echo &quot;[]&quot;
fi
</pre></div>
</div>
<p>Download the script and change the config variables to met your DATAGERRY configuration. Start Ansible with the -i flag:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ansible<span class="w"> </span>-i<span class="w"> </span>ansible_dyn_inventory.sh<span class="w"> </span><span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>This exporter class has no parameters, but needs some Export Variables to be set:</p>
<table class="docutils align-left" id="id3" style="width: 100%">
<caption><span class="caption-text">Table 3: ExternalSystemAnsible - Supported export variables</span><a class="headerlink" href="#id3" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>hostname</p></td>
<td><p>True</p></td>
<td><p>hostname or IP that Ansible uses for connecting to the host. e.g. - test.example.com</p></td>
</tr>
<tr class="row-odd"><td><p>group_</p></td>
<td><p>True</p></td>
<td><p>Ansible group membership. e.g. - group_webservers</p></td>
</tr>
<tr class="row-even"><td><p>hostvar_</p></td>
<td><p>True</p></td>
<td><p>host variables that should be given to Ansible. e.g. - hostvar_snmpread</p></td>
</tr>
</tbody>
</table>
<p>For each CMDB object the export variable hostname has to be set which is used by Ansible to connect to a CMDB object.
Hosts are organized in Ansible groups. For adding a CMDB object to a specific group, the group_ variables are used. The
variable name is group_groupname and the value is True, if the CMDB object should be a member of the group.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#variablename: group_webserver</span>
<span class="c1">#value of the variable for object: True</span>
<span class="c1">#behavior: the object is part of the Ansible group webserver.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Checkbox fields in object types are perfect for controlling the group memberships.</p>
</div>
<p>You can set host variables for Ansible using the hostvar_ variables. The variable name is hostvar_varname, which means,
you can access the value by using the name varname in Ansible.</p>
</section>
<section id="externalsystemcpaneldns">
<h3><span class="section-number">4.3.2. </span>ExternalSystemCpanelDns<a class="headerlink" href="#externalsystemcpaneldns" title="Link to this heading">¶</a></h3>
<p>This destination adds DNS A-records for CMDB objects to a given DNS zone in cPanel using the cPanel JSON API version 2.
Any existing A records in that zone, that does not exists as objects in DATAGERRY will be deleted. You can manage other
record types like CNAME or MX records manually in that zone and the exporter will not touch these records.</p>
<p>To use this exporter, you need a valid cPanel account with username and password and a DNS zone, you can manage.
The exporter will not create a DNS zone for you. So the DNS zone should already exist, if you want to use this exporter.</p>
<p>The exporter class has the following parameters:</p>
<table class="docutils align-left" id="id4" style="width: 100%">
<caption><span class="caption-text">Table 4: ExternalSystemCpanelDns - Supported export parameters</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cpanelApiUrl</p></td>
<td><p>True</p></td>
<td><p>cPanel API base URL</p></td>
</tr>
<tr class="row-odd"><td><p>cpanelApiUser</p></td>
<td><p>True</p></td>
<td><p>cPanel username</p></td>
</tr>
<tr class="row-even"><td><p>cpanelApiPassword</p></td>
<td><p>True</p></td>
<td><p>cPanel password</p></td>
</tr>
<tr class="row-odd"><td><p>cpanelApiToken</p></td>
<td><p>True</p></td>
<td><p>cPanel API token</p></td>
</tr>
<tr class="row-even"><td><p>domainName</p></td>
<td><p>True</p></td>
<td><p>DNS Zone managed by cPanel for adding DNS A records</p></td>
</tr>
<tr class="row-odd"><td><p>cpanelApiSslVerify</p></td>
<td><p>False</p></td>
<td><p>disable SSL peer verification</p></td>
</tr>
</tbody>
</table>
<p>The following variables needs to be set:</p>
<table class="docutils align-left" id="id5" style="width: 100%">
<caption><span class="caption-text">Table 5: ExternalSystemCpanelDns - Supported export variables</span><a class="headerlink" href="#id5" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>hostname</p></td>
<td><p>True</p></td>
<td><p>host part of the DNS A record. e.g. - test</p></td>
</tr>
<tr class="row-odd"><td><p>ip</p></td>
<td><p>True</p></td>
<td><p>host part of the DNS A record. e.g. - test</p></td>
</tr>
</tbody>
</table>
</section>
<section id="externalsystemcsv">
<h3><span class="section-number">4.3.3. </span>ExternalSystemCsv<a class="headerlink" href="#externalsystemcsv" title="Link to this heading">¶</a></h3>
<p>This class will create a CSV file on the filesystem.</p>
<p>The exporter class has the following parameters:</p>
<table class="docutils align-left" id="id6" style="width: 100%">
<caption><span class="caption-text">Table 6: ExternalSystemCsv - Supported export variables</span><a class="headerlink" href="#id6" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>csv_filename</p></td>
<td><p>False</p></td>
<td><p>name of the output CSV file. Default: stdout</p></td>
</tr>
<tr class="row-odd"><td><p>csv_delimiter</p></td>
<td><p>False</p></td>
<td><p>CSV delimiter. Default: ‘;’</p></td>
</tr>
<tr class="row-even"><td><p>csv_enclosure</p></td>
<td><p>False</p></td>
<td><p>CSV enclosure.</p></td>
</tr>
</tbody>
</table>
<p>Each export variable will define a row in the CSV file. The header of the row is the export variable name.</p>
</section>
<section id="externalsystemexecutescript">
<h3><span class="section-number">4.3.4. </span>ExternalSystemExecuteScript<a class="headerlink" href="#externalsystemexecutescript" title="Link to this heading">¶</a></h3>
<p>This class will execute an external script or binary on the DATAGERRY machine. A JSON structure with object IDs and
export variables will be passed to the external script/binary via stdin.</p>
<p>The exporter class has the following parameters:</p>
<table class="docutils align-left" id="id7" style="width: 100%">
<caption><span class="caption-text">Table 7: ExternalSystemExecuteScript - Supported export parameters</span><a class="headerlink" href="#id7" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>script</p></td>
<td><p>True</p></td>
<td><p>full path to the script that should be executed</p></td>
</tr>
<tr class="row-odd"><td><p>timeout</p></td>
<td><p>True</p></td>
<td><p>timeout for executing the script</p></td>
</tr>
</tbody>
</table>
<p>You can define any export variables. All defined export variables will be sent to the executed script/binary via stdin
within a JSON structure. Please see the following section for an example JSON structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;var1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;var2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value2&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1235</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;var1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;var2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value2&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>As executing a script or binary on the machine can be a bit of a security concern, we added some extra security feature
for this exporter class. DATAGERRY will look for a file named <em>.datagerry_exec.json</em> inside the directory for the script
that should be executed. In that file, every script or binary that should be executed by DATAGERRY needs to be listed.
Please see the following example file:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;allowed_scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;test2.py&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>DATAGERRY will not execute scripts, that are not listed in a <em>.datagerry_exec.json</em> file.</p>
</section>
<section id="externalsystemgenericpulljson">
<h3><span class="section-number">4.3.5. </span>ExternalSystemGenericPullJson<a class="headerlink" href="#externalsystemgenericpulljson" title="Link to this heading">¶</a></h3>
<p>This class will provide a JSON structure with object IDs and export variables that can be requested by a user via the
DATAGERRY REST API. It needs to be configured as Pull job. The get the JSON structure, have a look at the following
curl example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span>!/bin/bash

<span class="gp"># </span>config<span class="w"> </span>variables
<span class="go">DATAGERRY_EXPORT_TASK=taskname</span>
<span class="go">DATAGERRY_REST_URL=http://127.0.0.1:4000/rest</span>
<span class="go">DATAGERRY_REST_USER=admin</span>
<span class="go">DATAGERRY_REST_PASSWORD=admin</span>

<span class="go">curl \</span>
<span class="go">    -X GET \</span>
<span class="go">    -u &quot;${DATAGERRY_REST_USER}:${DATAGERRY_REST_PASSWORD}&quot; \</span>
<span class="go">    --silent \</span>
<span class="gp">    $</span><span class="o">{</span>DATAGERRY_REST_URL<span class="o">}</span>/exportdjob/pull/<span class="si">${</span><span class="nv">DATAGERRY_EXPORT_TASK</span><span class="si">}</span>
</pre></div>
</div>
<p>The exporter class has no parameters.</p>
<p>You can define any export variables. All defined export variables will be included in the JSON structure that will be
sent as HTTP response. Please see the following section for an example JSON structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;var1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;var2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value2&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1235</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;var1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;var2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value2&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="externalsystemgenericrestcall">
<h3><span class="section-number">4.3.6. </span>ExternalSystemGenericRestCall<a class="headerlink" href="#externalsystemgenericrestcall" title="Link to this heading">¶</a></h3>
<p>This class will send an HTTP POST request to an user-defined URL. A JSON structure with object IDs and export variables
will be sent as data within the HTTP request.</p>
<p>The exporter class has the following parameters:</p>
<table class="docutils align-left" id="id8" style="width: 100%">
<caption><span class="caption-text">Table 8: ExternalSystemGenericRestCall - Supported export parameters</span><a class="headerlink" href="#id8" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>url</p></td>
<td><p>True</p></td>
<td><p>URL for HTTP POST request</p></td>
</tr>
<tr class="row-odd"><td><p>timeout</p></td>
<td><p>True</p></td>
<td><p>timeout for executing the REST call in seconds</p></td>
</tr>
<tr class="row-even"><td><p>username</p></td>
<td><p>False</p></td>
<td><p>Username for a HTTP basic authentication. If empty, no authentication will be done.</p></td>
</tr>
<tr class="row-odd"><td><p>password</p></td>
<td><p>False</p></td>
<td><p>Password for a HTTP basic authentication.</p></td>
</tr>
</tbody>
</table>
<p>You can define any export variables. All defined export variables will be sent as JSON structure within the HTTP
request. Please see the following section for an example JSON structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;var1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;var2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value2&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;object_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1235</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;variables&quot;</span><span class="p">:</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;var1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;var2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value2&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="externalsystemmysqldb">
<h3><span class="section-number">4.3.7. </span>ExternalSystemMySQLDB<a class="headerlink" href="#externalsystemmysqldb" title="Link to this heading">¶</a></h3>
<p>This exporter synchronizes DATAGERRY objects to one or multiple database tables in a MySQL/MariaDB database. The
synchronization is done within one database transaction. At first, the content of the configured tables will be deleted.
After that, the new data will be inserted. If anything goes wrong (e.g. a table does not exist, there is an error in SQL
syntax, etc.), a rollback will be done.</p>
<p>The exporter class has the following parameters:</p>
<table class="docutils align-left" id="id9" style="width: 100%">
<caption><span class="caption-text">Table 9: ExternalSystemMySQLDB - Supported export parameters</span><a class="headerlink" href="#id9" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dbserver</p></td>
<td><p>True</p></td>
<td><p>Hostname or IP of the database server</p></td>
</tr>
<tr class="row-odd"><td><p>database</p></td>
<td><p>True</p></td>
<td><p>database name</p></td>
</tr>
<tr class="row-even"><td><p>username</p></td>
<td><p>True</p></td>
<td><p>username for database connection</p></td>
</tr>
<tr class="row-odd"><td><p>password</p></td>
<td><p>True</p></td>
<td><p>password for database connection</p></td>
</tr>
</tbody>
</table>
<p>The following export variables can be defined:</p>
<table class="docutils align-left" id="id10" style="width: 100%">
<caption><span class="caption-text">Table 10: ExternalSystemMySQLDB - Supported export variables</span><a class="headerlink" href="#id10" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>table_&lt;name&gt;</p></td>
<td><p>True</p></td>
<td><p>adding CMDB data to database table with name &lt;name&gt;. As value, comma seperated field values (in SQL INSERT syntax) should be defined</p></td>
</tr>
</tbody>
</table>
<p>The exporter can synchronize objects to one or multiple database tables. Please see an example of the export variable syntax below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#variable name: table_users</span>
<span class="c1">#variable value: &quot;{{id}}&quot;, &quot;{{fields[&#39;username&#39;]}}&quot;, NULL, NULL</span>

<span class="c1">#variable name: table_groups</span>
<span class="c1">#variable value: &quot;{{id}}&quot;, &quot;{{fields[&#39;username&#39;]}}&quot;</span>
</pre></div>
</div>
</section>
<section id="externalsystemopennms">
<h3><span class="section-number">4.3.8. </span>ExternalSystemOpenNMS<a class="headerlink" href="#externalsystemopennms" title="Link to this heading">¶</a></h3>
<p>This class will create/update/delete nodes in the monitoring system OpenNMS. DATAGERRY objects were exported to one
OpenNMS provisioning requisition using the OpenNMS REST API. Foreach exported object, ip, hostname, asset informations
and surveillance categories can be set. Optionallly an export of SNMP communities (at the moment SNMPv1 and SNMPv2c are
supported) can be done.</p>
<p>The exporter class has the following parameters:</p>
<table class="docutils align-left" id="id11" style="width: 100%">
<caption><span class="caption-text">Table 11: ExternalSystemOpenNMS - Supported export parameters</span><a class="headerlink" href="#id11" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>resturl</p></td>
<td><p>True</p></td>
<td><p>OpenNMS REST URL</p></td>
</tr>
<tr class="row-odd"><td><p>restuser</p></td>
<td><p>True</p></td>
<td><p>OpenNMS REST user</p></td>
</tr>
<tr class="row-even"><td><p>restpassword</p></td>
<td><p>True</p></td>
<td><p>OpenNMS REST password</p></td>
</tr>
<tr class="row-odd"><td><p>requisition</p></td>
<td><p>True</p></td>
<td><p>OpenNMS requisition to use</p></td>
</tr>
<tr class="row-even"><td><p>services</p></td>
<td><p>False</p></td>
<td><p>name of services to bind on each node sepetated by space</p></td>
</tr>
<tr class="row-odd"><td><p>exportSnmpConfig</p></td>
<td><p>False</p></td>
<td><p>also export SNMP configuration for nodes</p></td>
</tr>
<tr class="row-even"><td><p>exportSnmpConfigRetries</p></td>
<td><p>False</p></td>
<td><p>export SNMP configuration for nodes: set SNMP retries</p></td>
</tr>
<tr class="row-odd"><td><p>exportSnmpConfigTimeout</p></td>
<td><p>False</p></td>
<td><p>export SNMP configuration for nodes: set SNMP timeout</p></td>
</tr>
</tbody>
</table>
<p>The following export variables can be defined:</p>
<table class="docutils align-left" id="id12" style="width: 100%">
<caption><span class="caption-text">Table 12: ExternalSystemOpenNMS - Supported export variables</span><a class="headerlink" href="#id12" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>nodelabel</p></td>
<td><p>True</p></td>
<td><p>nodelabel for the OpenNMS node</p></td>
</tr>
<tr class="row-odd"><td><p>ip</p></td>
<td><p>True</p></td>
<td><p>ip address to add in OpenNMS</p></td>
</tr>
<tr class="row-even"><td><p>furtherIps</p></td>
<td><p>True</p></td>
<td><p>further ip addresses to add to OpenNMS node. Format: IP1;IP2;IP3.</p></td>
</tr>
<tr class="row-odd"><td><p>asset_</p></td>
<td><p>True</p></td>
<td><p>content for asset field e.g. - asset_city for adding information to the city field</p></td>
</tr>
<tr class="row-even"><td><p>category_</p></td>
<td><p>True</p></td>
<td><p>use variable value of the field to define a category e.g. - category_1</p></td>
</tr>
<tr class="row-odd"><td><p>snmp_community</p></td>
<td><p>True</p></td>
<td><p>SNMP community of a node. This will be set in OpenNMS, if exportSnmpConfig is set to true.</p></td>
</tr>
<tr class="row-even"><td><p>snmp_version</p></td>
<td><p>True</p></td>
<td><p>SNMP version of a node. This will be set in OpenNMS, if exportSnmpConfig is set to true. Currently the exporter supports only v1/v2c</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


                    </div>
                </div>
               
    <footer class="footer">
        <div class="container">
            <p class="float-left">
                        &copy; Copyright 2025, becon GmbH
            </p>
            <p class="float-right">
                <a href="#">Back to top</a>
                
            </p>
        <div class="clearfix"></div>
        </div>
    </footer>
            </div>
    </div>

  </body>
</html>