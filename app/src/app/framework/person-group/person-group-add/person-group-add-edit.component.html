<div class="container">
  <!-- Heading -->
  <h2 *ngIf="!isEdit">Add Person Group</h2>
  <h2 *ngIf="isEdit && !isView">Edit Person Group</h2>
  <h2 *ngIf="isView">View Person Group</h2>

  <hr />

  <form>
    <!-- Name -->
    <div class="form-group mb-3">
      <label>Name *</label>
      <input class="form-control" type="text" [value]="personGroup.name"
        (input)="onNameChange($any($event.target).value)" [readonly]="isView" />
    </div>

    <!-- Email -->
    <div class="form-group mb-3">
      <label>Email</label>
      <input class="form-control" type="email" [value]="personGroup.email"
        (input)="onEmailChange($any($event.target).value)" [readonly]="isView" />
    </div>

    <!-- Group Members (Multi-Select of all Persons) -->
    <div class="form-group mb-3">
      <label>Group Members</label>
      <app-form-select [items]="allPersons" bindLabel="display_name" bindValue="public_id" [multiple]="true"
        [disabled]="isView" [ngModel]="personGroup.group_members" (ngModelChange)="onMembersChange($event)">
      </app-form-select>

      <!-- <select
        multiple
        class="form-control"
        (change)="onMembersChange($any($event.target).selectedOptions)"
        [disabled]="isView"
      >
        <option
          *ngFor="let p of allPersons"
          [value]="p.public_id"
          [selected]="personGroup.group_members?.includes(p.public_id!)"
        >
          {{ p.display_name }}
        </option>
      </select> -->
    </div>

    <button type="button" class="btn btn-primary" (click)="onSave()" [disabled]="loading">
      <!-- If weâ€™re viewing, button will do nothing but let's show a label anyway -->
      {{ isView ? 'Close' : (isEdit ? 'Update' : 'Create') }}
    </button>
    <button type="button" class="btn btn-secondary ml-2" (click)="onCancel()">
      Cancel
    </button>
  </form>
</div>