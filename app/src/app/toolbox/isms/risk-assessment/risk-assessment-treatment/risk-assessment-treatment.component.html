<div class="accordion-item">
  <div class="mt-3">

    <!-- ───────── Treatment Option ───────── -->
    <div class="mb-3">
      <label class="d-block">
        Treatment Option
      </label>
      <ng-container *ngFor="let opt of riskTreatmentOptions">
        <app-radio [label]="opt.label" [value]="opt.value" name="treatOptGrp" [id]="'treat_'+opt.value"
          [formControl]="parentForm.get('risk_treatment_option')">
        </app-radio>
      </ng-container>
    </div>

    <!-- ───────── Responsible Persons ───────── -->
    <div class="form-block mt-4">
      <label>Responsible Persons</label>
      <app-form-select class="w-100" [items]="responsiblePersonOptions" bindLabel="display_name" bindValue="public_id"
        groupBy="group" placeholder="Select owner…" [formControl]="parentForm.get('responsible_persons_id')"
        (selectedItemChange)="onOwnerSelected($event)">
      </app-form-select>
    </div>

    <!-- ───────── Risk-Treatment Description ───────── -->
    <div class="mb-3">
      <label>Risk Treatment Description</label>
      <app-form-textarea [formControl]="parentForm.get('risk_treatment_description')">
      </app-form-textarea>
    </div>

    <!-- ───────── Dates & Status ───────── -->
    <div class="mb-3">
      <label>Planned Implementation Date</label>
      <app-form-date [formControl]="parentForm.get('planned_implementation_date')">
      </app-form-date>
    </div>

    <div class="mb-3">
      <label>Implementation Status</label>
      <app-form-select [items]="implementationStates" bindLabel="value" bindValue="public_id"
        [formControl]="parentForm.get('implementation_status')" placeholder="Select Implementation Status">
      </app-form-select>
    </div>

    <div class="mb-3">
      <label>Finished Implementation Date</label>
      <app-form-date [formControl]="parentForm.get('finished_implementation_date')">
      </app-form-date>
    </div>

    <!-- ───────── Resources & Costs ───────── -->
    <div class="mb-3">
      <label>Required Resources</label>
      <app-form-textarea [formControl]="parentForm.get('required_resources')">
      </app-form-textarea>
    </div>

    <div class="row g-3 mb-3">
      <div class="col-md-6">
        <label>Costs for Implementation</label>
        <app-form-input type="number" [formControl]="parentForm.get('costs_for_implementation')">
        </app-form-input>
      </div>
      <div class="col-md-6">
        <label>Currency</label>
        <app-form-input [formControl]="parentForm.get('costs_for_implementation_currency')">
        </app-form-input>
      </div>
    </div>

    <!-- ───────── Priority ───────── -->
    <div class="mb-3">
      <label>Priority</label>
      <app-form-select [items]="priorityOptions" bindLabel="label" bindValue="value" dropdownDirection="top"
        [formControl]="parentForm.get('priority')" (selectedItemChange)="onPrioritySelected($event)">
      </app-form-select>
    </div>

    <hr>
    <ra-cm-assignment-inline #cmInline [parentForm]="parentForm" [allControlMeasures]="allControlMeasures"
      [implementationStates]="implementationStates" [allPersons]="allPersons" [allPersonGroups]="allPersonGroups" [riskAssessmentId]="riskAssessmentId"
      [createMode]="createMode">
    </ra-cm-assignment-inline>
  </div><!-- /.mt-3 -->
</div><!-- /.accordion-item -->